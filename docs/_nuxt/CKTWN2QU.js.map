{"version":3,"file":"CKTWN2QU.js","sources":["../../../../node_modules/nuxt/dist/app/composables/fetch.js","../../../../pages/sentry-example-page.vue"],"sourcesContent":["import { computed, reactive, toValue } from \"vue\";\nimport { hash } from \"ohash\";\nimport { useRequestFetch } from \"./ssr.js\";\nimport { useAsyncData } from \"./asyncData.js\";\nimport { fetchDefaults } from \"#build/nuxt.config.mjs\";\nexport function useFetch(request, arg1, arg2) {\n  const [opts = {}, autoKey] = typeof arg1 === \"string\" ? [{}, arg1] : [arg1, arg2];\n  const _request = computed(() => toValue(request));\n  const _key = opts.key || hash([autoKey, typeof _request.value === \"string\" ? _request.value : \"\", ...generateOptionSegments(opts)]);\n  if (!_key || typeof _key !== \"string\") {\n    throw new TypeError(\"[nuxt] [useFetch] key must be a string: \" + _key);\n  }\n  if (!request) {\n    throw new Error(\"[nuxt] [useFetch] request is missing.\");\n  }\n  const key = _key === autoKey ? \"$f\" + _key : _key;\n  if (!opts.baseURL && typeof _request.value === \"string\" && (_request.value[0] === \"/\" && _request.value[1] === \"/\")) {\n    throw new Error('[nuxt] [useFetch] the request URL must not start with \"//\".');\n  }\n  const {\n    server,\n    lazy,\n    default: defaultFn,\n    transform,\n    pick,\n    watch,\n    immediate,\n    getCachedData,\n    deep,\n    dedupe,\n    ...fetchOptions\n  } = opts;\n  const _fetchOptions = reactive({\n    ...fetchDefaults,\n    ...fetchOptions,\n    cache: typeof opts.cache === \"boolean\" ? void 0 : opts.cache\n  });\n  const _asyncDataOptions = {\n    server,\n    lazy,\n    default: defaultFn,\n    transform,\n    pick,\n    immediate,\n    getCachedData,\n    deep,\n    dedupe,\n    watch: watch === false ? [] : [_fetchOptions, _request, ...watch || []]\n  };\n  if (import.meta.dev && import.meta.client) {\n    _asyncDataOptions._functionName = opts._functionName || \"useFetch\";\n  }\n  let controller;\n  const asyncData = useAsyncData(key, () => {\n    controller?.abort?.(new DOMException(\"Request aborted as another request to the same endpoint was initiated.\", \"AbortError\"));\n    controller = typeof AbortController !== \"undefined\" ? new AbortController() : {};\n    const timeoutLength = toValue(opts.timeout);\n    let timeoutId;\n    if (timeoutLength) {\n      timeoutId = setTimeout(() => controller.abort(new DOMException(\"Request aborted due to timeout.\", \"AbortError\")), timeoutLength);\n      controller.signal.onabort = () => clearTimeout(timeoutId);\n    }\n    let _$fetch = opts.$fetch || globalThis.$fetch;\n    if (import.meta.server && !opts.$fetch) {\n      const isLocalFetch = typeof _request.value === \"string\" && _request.value[0] === \"/\" && (!toValue(opts.baseURL) || toValue(opts.baseURL)[0] === \"/\");\n      if (isLocalFetch) {\n        _$fetch = useRequestFetch();\n      }\n    }\n    return _$fetch(_request.value, { signal: controller.signal, ..._fetchOptions }).finally(() => {\n      clearTimeout(timeoutId);\n    });\n  }, _asyncDataOptions);\n  return asyncData;\n}\nexport function useLazyFetch(request, arg1, arg2) {\n  const [opts = {}, autoKey] = typeof arg1 === \"string\" ? [{}, arg1] : [arg1, arg2];\n  if (import.meta.dev && import.meta.client) {\n    opts._functionName ||= \"useLazyFetch\";\n  }\n  return useFetch(\n    request,\n    {\n      ...opts,\n      lazy: true\n    },\n    // @ts-expect-error we pass an extra argument with the resolved auto-key to prevent another from being injected\n    autoKey\n  );\n}\nfunction generateOptionSegments(opts) {\n  const segments = [\n    toValue(opts.method)?.toUpperCase() || \"GET\",\n    toValue(opts.baseURL)\n  ];\n  for (const _obj of [opts.params || opts.query]) {\n    const obj = toValue(_obj);\n    if (!obj) {\n      continue;\n    }\n    const unwrapped = {};\n    for (const [key, value] of Object.entries(obj)) {\n      unwrapped[toValue(key)] = toValue(value);\n    }\n    segments.push(unwrapped);\n  }\n  return segments;\n}\n","<!--\nThis is just a very simple page with a button to throw an example error.\nFeel free to delete this file.\n-->\n\n<script setup>\n  import * as Sentry from '@sentry/nuxt';\n  import { useFetch} from '#imports'\n  \n  function getSentryData() {\n    Sentry.startSpan(\n      {\n        name: 'Example Frontend Span',\n        op: 'test'\n      },\n      async () => {\n        const { error } = await useFetch('/api/sentry-example-api');\n        if (error.value) {\n          throw new Error('Sentry Example Frontend Error');\n        }\n      }\n    )\n  }\n</script>\n\n<template>\n  <title>Sentry Onboarding</title>\n  <div>\n  <main>\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 200 44\">\n      <path\n        fill=\"currentColor\"\n        d=\"M124.32,28.28,109.56,9.22h-3.68V34.77h3.73V15.19l15.18,19.58h3.26V9.22h-3.73ZM87.15,23.54h13.23V20.22H87.14V12.53h14.93V9.21H83.34V34.77h18.92V31.45H87.14ZM71.59,20.3h0C66.44,19.06,65,18.08,65,15.7c0-2.14,1.89-3.59,4.71-3.59a12.06,12.06,0,0,1,7.07,2.55l2-2.83a14.1,14.1,0,0,0-9-3c-5.06,0-8.59,3-8.59,7.27,0,4.6,3,6.19,8.46,7.52C74.51,24.74,76,25.78,76,28.11s-2,3.77-5.09,3.77a12.34,12.34,0,0,1-8.3-3.26l-2.25,2.69a15.94,15.94,0,0,0,10.42,3.85c5.48,0,9-2.95,9-7.51C79.75,23.79,77.47,21.72,71.59,20.3ZM195.7,9.22l-7.69,12-7.64-12h-4.46L186,24.67V34.78h3.84V24.55L200,9.22Zm-64.63,3.46h8.37v22.1h3.84V12.68h8.37V9.22H131.08ZM169.41,24.8c3.86-1.07,6-3.77,6-7.63,0-4.91-3.59-8-9.38-8H154.67V34.76h3.8V25.58h6.45l6.48,9.2h4.44l-7-9.82Zm-10.95-2.5V12.6h7.17c3.74,0,5.88,1.77,5.88,4.84s-2.29,4.86-5.84,4.86Z M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z\"\n      />\n    </svg>\n    <p>\n      Get Started with this <strong>simple Example:</strong>\n    </p>\n\n    <p>1. Send us a sample error:</p>\n    <button type=\"button\" @click=\"getSentryData\"> Throw error! </button>\n\n    <p>\n      2. Look for the error on the\n      <a href=\"https://pkcat.sentry.io/issues/?project=4508760863277136\">Issues Page</a>.\n    </p>\n    <p style=\"margin-top: 24px;\">\n      For more information, take a look at the\n      <a href=\"https://docs.sentry.io/platforms/javascript/guides/nuxt/\">\n        Sentry Nuxt Documentation\n      </a>\n    </p>\n  </main>\n</div>\n</template>\n\n<style scoped>\n  main {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n  }\n\n  svg {\n    font-size: 4rem;\n    margin: 14px 0;\n    height: 1em;\n  }\n\n  button {\n    padding: 12px;\n    cursor: pointer;\n    background-color: rgb(54, 45, 89);\n    border-radius: 4px;\n    border: none;\n    color: white;\n    font-size: 1em;\n    margin: 1em;\n    transition: all 0.25s ease-in-out;\n  }\n  button:hover {\n    background-color: #8c5393;\n    box-shadow: 4px;\n    box-shadow: 0px 0px 15px 2px rgba(140, 83, 147, 0.5);\n  }\n  button:active {\n    background-color: #c73852;\n  }\n</style>\n"],"names":["useFetch","request","arg1","arg2","opts","autoKey","_request","computed","toValue","_key","hash","generateOptionSegments","key","server","lazy","defaultFn","transform","pick","watch","immediate","getCachedData","deep","dedupe","fetchOptions","_fetchOptions","reactive","fetchDefaults","_asyncDataOptions","controller","useAsyncData","_a","timeoutLength","timeoutId","segments","_obj","obj","unwrapped","value","getSentryData","Sentry.startSpan","error"],"mappings":"+eAKO,SAASA,EAASC,EAASC,EAAMC,EAAM,CAC5C,KAAM,CAACC,EAAO,GAAIC,CAAO,EAA+B,CAAC,CAAA,EAAIH,CAAI,EAC3DI,EAAWC,EAAS,IAAMC,EAAQP,CAAO,CAAC,EAC1CQ,EAAOL,EAAK,KAAOM,EAAK,CAACL,EAAS,OAAOC,EAAS,OAAU,SAAWA,EAAS,MAAQ,GAAI,GAAGK,EAAuBP,CAAI,CAAC,CAAC,EAClI,GAAI,CAACK,GAAQ,OAAOA,GAAS,SAC3B,MAAM,IAAI,UAAU,2CAA6CA,CAAI,EAKvE,MAAMG,EAAMH,IAASJ,EAAU,KAAOI,EAAOA,EAC7C,GAAI,CAACL,EAAK,SAAW,OAAOE,EAAS,OAAU,UAAaA,EAAS,MAAM,CAAC,IAAM,KAAOA,EAAS,MAAM,CAAC,IAAM,IAC7G,MAAM,IAAI,MAAM,6DAA6D,EAE/E,KAAM,CACJ,OAAAO,EACA,KAAAC,EACA,QAASC,EACT,UAAAC,EACA,KAAAC,EACA,MAAAC,EACA,UAAAC,EACA,cAAAC,EACA,KAAAC,EACA,OAAAC,EACA,GAAGC,CACP,EAAMnB,EACEoB,EAAgBC,EAAS,CAC7B,GAAGC,EACH,GAAGH,EACH,MAAO,OAAOnB,EAAK,OAAU,UAAY,OAASA,EAAK,KAC3D,CAAG,EACKuB,EAAoB,CACxB,OAAAd,EACA,KAAAC,EACA,QAASC,EACT,UAAAC,EACA,KAAAC,EACA,UAAAE,EACA,cAAAC,EACA,KAAAC,EACA,OAAAC,EACA,MAAOJ,IAAU,GAAQ,CAAE,EAAG,CAACM,EAAelB,EAAU,GAAGY,GAAS,CAAE,CAAA,CACvE,EAID,IAAIU,EAqBJ,OApBkBC,EAAajB,EAAK,IAAM,QACxCkB,EAAAF,GAAA,YAAAA,EAAY,QAAZ,MAAAE,EAAA,KAAAF,EAAoB,IAAI,aAAa,yEAA0E,YAAY,GAC3HA,EAAa,OAAO,gBAAoB,IAAc,IAAI,gBAAoB,CAAE,EAChF,MAAMG,EAAgBvB,EAAQJ,EAAK,OAAO,EAC1C,IAAI4B,EACJ,OAAID,IACFC,EAAY,WAAW,IAAMJ,EAAW,MAAM,IAAI,aAAa,kCAAmC,YAAY,CAAC,EAAGG,CAAa,EAC/HH,EAAW,OAAO,QAAU,IAAM,aAAaI,CAAS,IAE5C5B,EAAK,QAAU,WAAW,QAOzBE,EAAS,MAAO,CAAE,OAAQsB,EAAW,OAAQ,GAAGJ,EAAe,EAAE,QAAQ,IAAM,CAC5F,aAAaQ,CAAS,CAC5B,CAAK,CACF,EAAEL,CAAiB,CAEtB,CAgBA,SAAShB,EAAuBP,EAAM,OACpC,MAAM6B,EAAW,GACfH,EAAAtB,EAAQJ,EAAK,MAAM,IAAnB,YAAA0B,EAAsB,gBAAiB,MACvCtB,EAAQJ,EAAK,OAAO,CACrB,EACD,UAAW8B,IAAQ,CAAC9B,EAAK,QAAUA,EAAK,KAAK,EAAG,CAC9C,MAAM+B,EAAM3B,EAAQ0B,CAAI,EACxB,GAAI,CAACC,EACH,SAEF,MAAMC,EAAY,CAAE,EACpB,SAAW,CAACxB,EAAKyB,CAAK,IAAK,OAAO,QAAQF,CAAG,EAC3CC,EAAU5B,EAAQI,CAAG,CAAC,EAAIJ,EAAQ6B,CAAK,EAEzCJ,EAAS,KAAKG,CAAS,CAC3B,CACE,OAAOH,CACT,gDClGE,SAASK,GAAgB,CACvBC,EACE,CACE,KAAM,wBACN,GAAI,MACL,EACD,SAAY,CACV,KAAM,CAAE,MAAAC,CAAO,EAAG,MAAMxC,EAAS,uCAAyB,EAC1D,GAAIwC,EAAM,MACR,MAAM,IAAI,MAAM,+BAA+B,CAEzD,CACA,CACA","x_google_ignoreList":[0]}